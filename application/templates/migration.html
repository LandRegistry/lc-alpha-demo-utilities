<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Bankruptcy search</title>
    {% include 'includes/ext_references.html' %}
</head>
<body>
{% include 'includes/vertical_nav.html' %}
<div id="main" class="container">
    <div class="container">
        <div class="row">
            <h2>Migration dashboard</h2>

            <form action="/migrate" method="POST">
                <div class="row col-sm-12" style="padding-bottom:50px">
                    <div style="height:50px">
                        <br/>
                        {% if error is defined %}
                            <p style="color:red">{{error}}</p>
                        {% elif response_message is defined %}
                            <p>{{response_message}}</p>
                        {% endif %}
                        <br/>
                    </div>
                    <div class="col-sm-4" >
                        <div class="form-group">
                            <label for="start_date">Start date:</label>
                            <input class="form-control" style="width:200px" type="text" id="start_date"
                                   placeholder="yyyy-mm-dd" name="start_date" value="{{start_date}}">

                        </div>
                        <div class="form-group">
                            <label for="end_date" >End date:</label>
                            <input class="form-control" style="width:200px" type="text" id="end_date"
                                   placeholder="yyyy-mm-dd" name="end_date" value="{{end_date}}">
                        </div>
                    </div>

                    <div class="col-sm-8" style="padding-top:60px" >
                        <div class="row col-sm-12" style="margin-bottom:5px">
                            <input class="btn btn-primary" name="submit" id="preview" type="submit" style="width:100px" value="Preview">
                        </div>
                        <div class="row col-sm-12">
                            <input class="btn btn-success" name="submit" id="start" type="submit" style="width:100px" value="Migrate">
                        </div>
                    </div>

                </div>

                <br/>


            </form>
        </div>
        {% if results is defined %}
        {% if results|length > 0 %}
        <div class="row">
            <h2>DB2 data to be migrated</h2><br/>
            <table id="resultsTable" class="table table-hover">
                <thead>
                <tr>
                    <th>Registration No</th>
                    <th>Registration Date</th>
                    <th>Class Type</th>
                    <th>Reverse Name</th>
                    <th>Remainder Name</th>
                    <th>Punctuation Code</th>
                </tr>
                </thead>
                {% for n in results %}
                <tbody>
                <tr>
                    <td>{{n['registration_no']}}</td>
                    <td>{{n['registration_date']}}</td>
                    <td>{{n['class_type']}}</td>
                    <td>{{n['reverse_name']}}</td>
                    <td>{{n['remainder_name']}}</td>
                    <td>{{n['punctuation_code']}}</td>
                </tr>
                </tbody>
                {% endfor %}
            </table>
        </div>
        {% endif %}

        <form action="/migration_dashboard" method="GET">
            <br/>
            <input class="btn btn-primary pull-right" id="reset" type="submit" value="reset">
        </form>
        {% endif %}

        {% if migrate_error is defined %}
        <div class="row">
            <h2>Migration errors for this run</h2><br/>
            <table id="errorTable" class="table table-hover">
                <thead>
                <tr>
                    <th>Error Details</th>
                </tr>
                </thead>
                {% for n in migrate_error %}
                <tbody>
                <tr>
                    <td>{{n}}</td>
                </tr>
                </tbody>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    </div>
</div>


</body>
</html>